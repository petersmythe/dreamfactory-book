(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{148:function(t,e,i){"use strict";i.r(e);var a=i(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),i("p",[i("a",{attrs:{href:"https://www.okta.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("Okta"),i("OutboundLink")],1),t._v(" is a powerful and popular identity management solution used by thousands of businesses across the globe. Many developers wish to integrate Okta into their application authentication infrastructure, and DreamFactory offers a straightforward solution for doing so. In this tutorial we'll guide you through the configuration process.")]),t._v(" "),t._m(2),t._v(" "),i("p",[t._v("Begin by creating an Okta account at "),i("a",{attrs:{href:"https://www.okta.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.okta.com"),i("OutboundLink")],1),t._v(" if you haven't already done so. Once logged-in, open the "),i("code",[t._v("Admin")]),t._v(" section:")]),t._v(" "),t._m(3),t._v(" "),i("p",[t._v("Next, you'll add a new application:")]),t._v(" "),t._m(4),t._v(" "),i("p",[t._v("Be sure to select SAML 2.0:")]),t._v(" "),t._m(5),t._v(" "),i("p",[t._v("Next, we'll configure the application:")]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),i("p",[t._v("Select our DreamFactory application in the list:")]),t._v(" "),t._m(26),t._v(" "),i("p",[t._v("Assign this application to the People and Groups who will use it:")]),t._v(" "),t._m(27),t._v(" "),t._m(28),t._m(29),i("p"),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),t._m(35),t._v(" "),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),t._v(" "),t._m(41),t._v(" "),t._m(42)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"chapter-4-securing-your-apis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#chapter-4-securing-your-apis","aria-hidden":"true"}},[this._v("#")]),this._v(" Chapter 4. Securing Your APIs")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"authenticating-with-okta"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#authenticating-with-okta","aria-hidden":"true"}},[this._v("#")]),this._v(" Authenticating with Okta")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"configuring-okta"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuring-okta","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuring OKTA")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/3453a85c_2019.18.04..png",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/createapp.jpeg",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/ec143ec9_2019.18.04..png",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/okta-app-first-conf.jpeg",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Open "),e("code",[this._v("Setup instructions")]),this._v(", making sure you don't close the tab containing these instructions as we'll return to them later:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/805a39fb_2019.18.04..png",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"configuring-dreamfactory"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuring-dreamfactory","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuring DreamFactory")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Next, we'll configure DreamFactory to support the new OKTA application. Begin by signing into DreamFactory as an administrator, and then navigate to the "),e("code",[this._v("Roles")]),this._v(" section and configure a role for the users who will sign in via Okta SSO. Here's an example of a role defining access to all APIs (not typical but nonetheless illustrative):")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/role.jpeg",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("With the role defined, navigate to the "),e("code",[this._v("Apps")]),this._v(" tab and create a new API key which will be associated with this role:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/4d5147a6_2019.18.04..png",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"creating-the-saml-2-0-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#creating-the-saml-2-0-service","aria-hidden":"true"}},[this._v("#")]),this._v(" Creating the SAML 2.0 Service")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("With the role and API key defined, it's time to create the SAML 2.0 service that will connect your Okta application to DreamFactory. Navigate to "),e("code",[this._v("Services > Create")]),this._v(", choose "),e("code",[this._v("SSO")]),this._v(", and finally "),e("code",[this._v("SAML 2.0")]),this._v(":")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/269c5d5d_2019.18.04..png",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Begin by configuring the "),e("code",[this._v("Info")]),this._v(" tab:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/74a971ed_2019.18.04..png",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Next, configure the "),e("code",[this._v("Config")]),this._v(" tab, filling in the fields with the information found in Okta's "),e("code",[this._v("Setup instructions")]),this._v(" page:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/374044b6_2019.18.04..png",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Save these changes, and navigate to the "),e("code",[this._v("API Docs")]),this._v(" tab. Here you can see new Okta endpoints:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/30050024_2019.18.04..png",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"adding-okta-users-to-the-dreamfactory-application"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#adding-okta-users-to-the-dreamfactory-application","aria-hidden":"true"}},[this._v("#")]),this._v(" Adding Okta Users to the DreamFactory Application")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("With your Okta application created and DreamFactory configured, return to Okta, and in the Admin app navigate to the "),e("code",[this._v("Application")]),this._v(" page:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/b72eb33c_2019.18.04..png",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/038b771f_2019.18.04..png",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/345418e2_2019.18.04..png",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Go to the "),e("code",[this._v("General")]),this._v(" tab and click the "),e("code",[this._v("Edit")]),this._v(" button:\n=\n")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/a765987e_2019.18.04..png",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Change "),e("code",[this._v("Single sign on URL")]),this._v(" and "),e("code",[this._v("Audience URI (SP Entity ID)")]),this._v(" to the values presented in DreamFactory's Okta API documentation, and then save the changes:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/1e2f05e7_2019.18.04..png",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h4",{attrs:{id:"application-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#application-configuration","aria-hidden":"true"}},[this._v("#")]),this._v(" Application configuration")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("We're almost done! Now we can sign in via Okta by going to the service's /sso endpoint. In our example application we assign "),e("code",[this._v("Sign in with OKTA")]),this._v(" button to this endpoint. Clicking this button, DreamFactory can return the "),e("code",[this._v("X-DreamFactory-Session-Token")]),this._v(", which we have to use for comunication with DreamFactory:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/1a0f8d6f_2019.18.04..png",width:"800"}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",[t._v("But how does DreamFactory know where send the token? We have to configure our "),i("code",[t._v("Relay State")]),t._v(" for this purpose. Open the "),i("code",[t._v("Services")]),t._v(" tab and select your OKTA SSO service. Navigate to the "),i("code",[t._v("Config")]),t._v(" tab and update the "),i("code",[t._v("Relay State")]),t._v(" field URL which will contain the token returned from DreamFactory. Our example site hosted on "),i("code",[t._v("http://127.0.0.1:5500")]),t._v(" will pass token to the "),i("code",[t._v("/hello.html")]),t._v(" page:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/a74c1d41_2019.18.04..png",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("DreamFactory will replace the "),e("code",[this._v("_token_")]),this._v(" with a real "),e("code",[this._v("X-DreamFactory-Session-Token")]),this._v(". You might then use JavaScript to persist this token to local storage, or use server-side languages to do the same using cookies:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/a11d4aaf_2019.18.04..png",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Now we can communicate with DreamFactory by including "),e("code",[this._v("X-DreamFactory-Session-Token")]),this._v(" and "),e("code",[this._v("X-DreamFactory-API-Key")]),this._v(" in the request header:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/123452d6_2019.18.04..png",width:"800"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Don't forget add your application to the CORS interface via "),e("code",[this._v("Config > CORS")]),this._v(". Our example CORS configuration allows any requests to all DreamFactory endpoints with any headers. You can configure it to be more secure:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"/images/04/okta/6a3f1331_2019.18.04..png",width:"800"}})])}],!1,null,null,null);n.options.__file="chapter04.md";e.default=n.exports}}]);